# 机器视觉 笔记

### 第一节课

参考书目

《Deep Learning for Computer Vision》

《OpenCV-Python Tutorials Documentation》

《Introduction to Visual Computing Core Concepts in Computer Vision,Graphics,and Image Processing》



### 第二节课

### 1. 视觉计算中的数据

- 一维数据：A（t）音频
- 二维数据：I（x，y）图像
- 三维数据：V（x，y，t）视频

**数据可视化**

**数据离散化**

**1. 采样**

- 均匀采样

- 非均匀采样（采样密度有疏有密）

- 采样后的重建（可能有别名或混叠效应产生）

- 奈奎斯特采样率：**对于正弦波或余弦波的频率f，至少需要2f的频率才可以正确重建**  

  ![Image text](https://github.com/Pangxiaox/2020-Learning-FinalExam-Notes/blob/master/机器视觉/sample.png)  

**2. 量化**

连续值转换为离散值

- Uniform Step Size：Maximum Error = 1/2（Step Size）
- Non-Uniform Step Size：Maximum Error = 1/2（Maximum Step SIze）

- 史蒂芬幂定律  

  ![Image text](https://github.com/Pangxiaox/2020-Learning-FinalExam-Notes/blob/master/机器视觉/formula.PNG)  

**数据表示**

**1. 时域（空域）表示**

- 普通音频数据：A（t）= sin（t）+1/2（sin（2t））------（离散化）----> A[t]
- 二维数字化图像：I[x,y]
- 彩色图像：I[c,x,y]，c∈{R,G,B}
- 视频：V[t,c,x,y]

**2. 频域表示**

频域：将信号看成一组更加基础的信号（如正余弦波）的混合（如线性组合）

信号可表示为基础信号组合成原始信号的组合系数：  
![Image text](https://github.com/Pangxiaox/2020-Learning-FinalExam-Notes/blob/master/机器视觉/datashow.PNG)  

二维时候可用极坐标(g,h)来表示

**3. 几何数据**

- 显式表示
- 隐式表示
- 参数化形式
- 在离散化表示中，不同于解析表示，一个几何实体用一组其他几何实体的集合表示。如一个二维正方形可定义为二维空间中一组线的集合；一个三维立方体可定义为三维空间中的一组四边形或三角形的组合。常用三角网格，构成网格的实体（如线、三角形或四边形）称为基元

**4. 噪声**

- 随机噪声

  **低通滤波**是去除数据中随机噪声一种常用技术

- 椒盐噪声：随机出现的白点或黑点，可能是亮的区域有黑色像素或暗的区域有白色像素或两者皆有

  **中值滤波器**或其他顺序统计滤波器能较好处理

- 用**陷波滤波器**去除或减少频域噪声

### 2. 视觉计算相关技术

**插值的计算**

图像的**放缩、旋转、去畸变**等操作都需要插值

插值是根据已知的数据序列，找到其中规律，然后根据找到的这个规律来对尚未有数据记录的点进行**数值估计**

- 线性插值

- 双线性插值：有两个变量的插值函数的线性插值扩展，在两个方向分别进行一次线性插值。

  单纯形：n-1维空间中的n个点两两相连得到的几何体，选取**重心坐标**

**几何相交的计算**

- 线性方程表示线（两个变量时）或平面（三个变量时），常需要计算这些几何实体之间的交集
- 只有当线性方程组相互线性无关时，方阵A的逆才存在。从几何角度看，n个方程中的每一个方程定义了一个超平面，x就是这些超平面在n维空间中的交集。如果A是满秩的，这n个超平面不平行，且只有一个唯一的交点。如当n=2时，两条不平行的线总是相交于一个点。
- 过约束的线性方程组也可使用Ax=b形式表示，A和b的维度分别是 mxn、mx1。此时A不是方阵，逆没有定义。
- 线性回归、线性最小二乘优化、奇异值分解（SVD）



### 第三节课

### 1. 基于图像的视觉计算（卷积）

**1.1 线性系统**

系统是指修改信号的方法。线性系统是指满足一些线性的传导性质：齐次性、可加性、平移不变性、可交换性、叠加性

- 齐次性：如果 x(t)👉S👉y(t)， 那么 Kx(t)👉S👉Ky(t)
- 可加性：如果x1(t)👉S👉y1(t)和x2(t)👉S👉y2(t)，那么 x1(t)+x2(t)👉S👉y1(t)+y2(t)
- 平移不变性：如果x(t)👉S👉y(t)，那么 x(t+s)👉S👉y(t+s)
- 可交换性：如果x(t)👉Sa👉Sb👉y(t)，那么 x(t)👉Sb👉Sa👉y(t)
- 叠加性：如果x1(t)👉S👉y1(t)、y2(t)和x2(t)👉S👉z1(t)、z2(t)，那么x1(t)+x2(t)👉S👉y1(t)+y2(t)、z1(t)+z2(t)

**线性系统的分解与合成**

- 分解：x(t)分解为x1(t)、x2(t) ······ xn(t)，它们分别通过系统S
- 合成：通过系统S后，产生y1(t)、y2(t) ······ yn(t)，然后输出相加合成

**线性系统的响应**

**放图 func**

- 脉冲i[t]：仅有一个非零元素的离散信号。脉冲信号在某一个位置有一个尖峰而其他位置都是0。三角波δ[t]是一种特殊的脉冲波，在t=0处取非零值，且δ[0]=1，一个三角波覆盖的区域的面积等于1。δ[t]被认为是最简单的信号。

- 任意一个在t=s处取非0值k的脉冲波可以表示为一个缩放和平移后的三角波：i[t] = kδ[t-s]

- 一个线性系统的脉冲响应：也称为核或者滤波器，h[t]定义为该系统以δ[t]为输入的输出。

  h的大小（一维情况称为宽度）也称为h的支撑。

- 卷积方法：用于计算一个具有脉冲响应h的线性系统对一个一般的信号或函数的响应。

  δ[t]👉S👉h[t] 和 x[t]👉S👉？------------------> ？ =  x[t] × h[t] 

**放图 response**

**卷积**

**放图conv**

- 全通系统：x[t] × δ[t] = x[t]
- 缩放：x[t] × kδ[t] = kx[t]
- 平移——延迟系统t：x[t] × δ[t+s] = x[t+s]

**卷积的性质**

- 可交换性：a[t] × b[t] = b[t] × a[t]
- 可结合性：(a[t] × b[t]) × c[t] = a[t] × (b[t] × c[t])
- 可分配性：a[t] × b[t] + a[t] × c[t] = a[t] × (b[t] + c[t])

**1.2 线性滤波器**

一旦设计了某个系统的脉冲响应，我们就能通过输入信号与脉冲响应的卷积得到该系统对任意函数的输出结果。

如果a[t] 👉F（频域转换）👉 A[f] 和 b[t]👉F👉 B[f]

那么a[t] × b[t]👉F（频域转换）👉A[f]B[f] 和 a[t]b[t] 👉F👉A[f] × B[f]

A[f] × B[f]、a[t] × b[t]表示卷积操作；A[f]B[f]、a[t]b[t]表示按数值相乘操作

- 全通滤波器：x[t] × δ[t] = x[t]

- 低通滤波器：高斯函数是一种优良的低通滤波器，比盒式滤波器有更加平滑的响应。

  ①更尖锐的函数的频域响应相对更宽；随着函数变光滑，其频域响应会变窄。

  ②随着滤波器尺寸（核的支撑）的增大，截断频率会降低。由于损失了更多高频信息，滤波器会造成更大的模糊。

  采样问题：对低通滤波后的图像进行充分采样所需的最低采样数会减少，即低通滤波后图像的尺寸可以比原始图像更小。当我们逐步增加低通滤波器大小时，无须保持图像原始尺寸而可以对它进行采样，并以更小尺寸存储，只要其尺寸足够大，能够采样图像中最高频率即可。（高斯金字塔）

- 高通滤波器：将低通滤波器的结果从原始图像中减掉。I_h = I - I × L = I × δ - I × L = I × （δ - L）

  与低通滤波器互补，能够去除低通滤波器保留的低频内容，同时保留被低通滤波器去除的高频内容的滤波器。

  拉普拉斯金字塔：高斯金字塔中图像：G0、G1、G2、···、Gn和拉普拉斯金字塔中图像L0、L1、···、Ln，L_i = G_i - G_i+1

- 带通滤波器：将滤波器l与其自身卷积i+1次，再将l与其自身卷积i次，最后将得到两个滤波器相减。该滤波器允许f_i和f_i+1之间的频率通过。

**二维滤波器的可分性**

（I × a）× b = I × （a × b） = I × h

(I × a(x, y)) = （I × a（x））× a（y）

可分离滤波器可以用更高效方式实现

**相关和模式匹配**

对取均值后的函数的卷积运算能够用于计算模板与图像子区域之间的相似度，这一过程被称为互相关。

**1.3 实现细节**

- 将滤波器与图像进行卷积时，将滤波器与图像的每个像素对齐后进行卷积非常重要
- 滤波器的大小为偶数时，我们无法找到中心像素，以使滤波器与等待卷积的图像对齐
- 当滤波器与图像边界以外的区域重合时，这些区域的像素并没有定义
- 卷积由许多浮点运算组成，而图像通常以8位整数型数保存
- 卷积运算有时候会在结果图像中产生越界的值